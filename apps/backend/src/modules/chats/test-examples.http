### Chat History API Test Examples
### Sử dụng với REST Client extension trong VS Code

@baseUrl = http://localhost:3000/api/v1/chat
@authToken = Bearer your-jwt-token-here

### 1. Tạo Session Mới
POST {{baseUrl}}/sessions/start
Content-Type: application/json

### 2. Gửi Tin Nhắn User
POST {{baseUrl}}/messages
Content-Type: application/json

{
  "sessionId": "your-session-id-here",
  "role": "user",
  "message": "Xin chào, tôi cần tư vấn về cách chăm sóc cây trồng trong nhà",
  "meta": {}
}

### 3. Gửi Tin Nhắn Assistant (Mock)
POST {{baseUrl}}/messages
Content-Type: application/json

{
  "sessionId": "your-session-id-here",
  "role": "assistant",
  "message": "Chào bạn! Tôi rất vui được giúp bạn tư vấn về chăm sóc cây trồng. Bạn có cây gì cần tư vấn không?",
  "meta": {
    "provider": "mock",
    "tokens": {
      "prompt": 50,
      "completion": 30,
      "total": 80
    }
  }
}

### 4. Lấy Lịch Sử Chat (Tất cả)
GET {{baseUrl}}/history?sessionId=your-session-id-here

### 5. Lấy Lịch Sử Chat (Có phân trang)
GET {{baseUrl}}/history?sessionId=your-session-id-here&page=1&limit=10

### 6. Tìm Kiếm Trong Chat
GET {{baseUrl}}/history?sessionId=your-session-id-here&q=tư vấn

### 7. Lọc Theo Thời Gian
GET {{baseUrl}}/history?sessionId=your-session-id-here&from=2024-01-01T00:00:00.000Z&to=2024-12-31T23:59:59.999Z

### 8. Danh Sách Session (Với Auth)
GET {{baseUrl}}/sessions?page=1&limit=10
Authorization: {{authToken}}

### 9. Danh Sách Session (Khách)
GET {{baseUrl}}/sessions?page=1&limit=10

### 10. Xóa Tin Nhắn
DELETE {{baseUrl}}/messages/your-message-id-here

### 11. Xóa Toàn Bộ Session
DELETE {{baseUrl}}/sessions/your-session-id-here

### 12. Test Validation Error - Thiếu sessionId
POST {{baseUrl}}/messages
Content-Type: application/json

{
  "role": "user",
  "message": "Test message without sessionId"
}

### 13. Test Validation Error - Tin nhắn quá dài
POST {{baseUrl}}/messages
Content-Type: application/json

{
  "sessionId": "your-session-id-here",
  "role": "user",
  "message": "{{$randomLoremParagraph(1000)}}"
}

### 14. Test Validation Error - Role không hợp lệ
POST {{baseUrl}}/messages
Content-Type: application/json

{
  "sessionId": "your-session-id-here",
  "role": "invalid_role",
  "message": "Test message"
}

### 15. Test Health Check
GET http://localhost:3000/api/v1/health
